<header
  class="w-full bg-gradient-to-r from-[#59B5C0] via-[#67D2DF] to-[#91E5ED] sticky top-0 z-999 lg:relative lg:z-auto"
>
  <div class="container mx-auto flex items-center justify-between px-4 sm:px-6 lg:px-8 py-6">
    <div class="flex items-center">
      <a
        routerLink="/"
        class="text-[#ECE81A] font-bold text-base flex max-w-full"
      >
        <app-logo
          [ngClass]="{
            'w-[215px] h-auto': type === 'full',
            'w-[174px] h-auto': type !== 'full',
          }"
        />
      </a>
    </div>

    <!-- Desktop Navigation -->
    <nav class="hidden lg:flex items-center space-x-8">
      <ng-container *ngFor="let item of menuItems">
        <a
          (click)="goToPage(item)"
          class="text-[#2E5D63] hover:text-[#1A3A3F] font-bold text-base cursor-pointer"
        >
          {{ item.label }}
        </a>
      </ng-container>

      <app-button
        (click)="goToFreePublish()"
        size="md"
        text="Pubblica annuncio gratuito"
      />

      <ng-container *ngIf="!authenticated">
        <div class="flex items-center">
          <button
            (click)="openLoginModal()"
            class="flex items-center text-[#2E5D63] hover:text-[#1A3A3F]"
          >
            <app-login-icon class="h-4 w-4 mr-1 mt-1" />
            <span class="font-bold">Accedi</span>
          </button>
        </div>
      </ng-container>

      <ng-container *ngIf="authenticated">
        <app-user-menu />
      </ng-container>
    </nav>

    <!-- Mobile Header Controls -->
    <div class="lg:hidden flex items-center space-x-3">
      <!-- Hamburger Menu Button -->
      <button
        (click)="toggleMenu()"
        class="text-[#2E5D63] z-50 relative items-center justify-center flex"
        aria-label="Apri menu"
      >
        <svg
          *ngIf="!isOpen"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 20 16"
          fill="none"
        >
          <path
            d="M0.5 1.25C0.5 0.585938 1.04688 0 1.75 0H16.75C17.4141 0 18 0.585938 18 1.25C18 1.95312 17.4141 2.5 16.75 2.5H1.75C1.04688 2.5 0.5 1.95312 0.5 1.25ZM0.5 7.5C0.5 6.83594 1.04688 6.25 1.75 6.25H16.75C17.4141 6.25 18 6.83594 18 7.5C18 8.20312 17.4141 8.75 16.75 8.75H1.75C1.04688 8.75 0.5 8.20312 0.5 7.5ZM16.75 15H1.75C1.04688 15 0.5 14.4531 0.5 13.75C0.5 13.0859 1.04688 12.5 1.75 12.5H16.75C17.4141 12.5 18 13.0859 18 13.75C18 14.4531 17.4141 15 16.75 15Z"
            fill="#2E5D63"
          />
        </svg>
        <svg
          *ngIf="isOpen"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>

      <!-- User Menu for Mobile (icon only, positioned at top right) -->
      <ng-container *ngIf="authenticated">
        <div class="lg:hidden">
          <app-user-menu class="mobile-user-menu" />
        </div>
      </ng-container>

      <!-- Login button for Mobile (icon only) -->
      <ng-container *ngIf="!authenticated">
        <button
          (click)="openLoginModal()"
          class="flex items-center text-[#2E5D63] hover:text-[#1A3A3F] p-1"
        >
          <app-login-icon class="h-5 w-5" />
        </button>
      </ng-container>
    </div>
  </div>

  <!-- Mobile Menu Overlay -->
  <div
    class="fixed inset-0 bg-primary-light z-50 transition-transform duration-300 lg:hidden"
    [ngClass]="{ 'translate-x-0': isOpen, 'translate-x-full': !isOpen }"
  >
    <div class="flex justify-between items-center p-4">
      <app-logo fillColor="#2E5D63" />
      <button
        type="button"
        (click)="toggleMenu()"
        class="text-gray-600"
        aria-label="Chiudi menu"
      >
        <svg
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>

    <nav class="mt-8 pb-5">
      <a
        *ngFor="let item of menuItems"
        [href]="item.href"
        class="py-5 px-4 text-[#2E5D63] hover:text-[#1A3A3F] font-bold text-lg flex justify-between items-center"
      >
        {{ item.label }}

        <svg
          width="18"
          height="17"
          viewBox="0 0 18 17"
          fill="none"
        >
          <path
            d="M10.8125 1.27344L17.6875 7.83594C17.8828 8.03125 18 8.26562 18 8.53906C18 8.77344 17.8828 9.00781 17.6875 9.20312L10.8125 15.7656C10.4609 16.1172 9.83594 16.1172 9.48438 15.7266C9.13281 15.375 9.13281 14.75 9.52344 14.3984L14.7188 9.47656H1.4375C0.890625 9.47656 0.5 9.04688 0.5 8.53906C0.5 7.99219 0.890625 7.60156 1.4375 7.60156H14.7188L9.52344 2.64062C9.13281 2.28906 9.13281 1.66406 9.48438 1.3125C9.83594 0.921875 10.4219 0.921875 10.8125 1.27344Z"
            fill="#2E5D63"
          />
        </svg>
      </a>
    </nav>

    <div class="absolute bottom-0 pb-4 w-full px-4">
      <app-button
        (click)="goToFreePublish()"
        size="md"
        text="Pubblica annuncio gratuito"
      />
    </div>
  </div>
</header>
