<!-- draw-map-modal.component.html -->
<div class="fixed inset-0 w-full h-full z-100 bg-black/50">
  <button
    id="closeIcon"
    (click)="closeModal()"
    class="right-4 top-4 text-gray-500 hover:text-gray-700 bg-white rounded-full p-2"
    style="position: absolute; z-index: 60"
  >
    <svg
      class="h-6 w-6"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M6 18L18 6M6 6l12 12"
      />
    </svg>
  </button>

  <div
    id="inputMap"
    class="top-4 left-4 w-[485px] p-8 bg-white rounded border border-gray-300 hidden lg:flex flex-col gap-y-6 justify-between align-top"
    style="position: absolute; z-index: 60"
  >
    <h1 class="font-montserrat font-extrabold text-2xl text-[#2E5D63]">Disegna area sulla mappa</h1>
    <!-- Using LInputAutocompleteComponent to ensure proper functionality -->
    <app-l-input-autocomplete
      #autocomplete
      [initialValue]="initialSearchValue"
      [citiesOnly]="true"
      [placeholder]="'Cerca una cittÃ ...'"
    ></app-l-input-autocomplete>
  </div>

  <!-- "Vedi X annunci" button that appears after drawing a polygon -->
  <div
    *ngIf="showPropertyCountButton"
    class="fixed bottom-8 left-1/2 transform -translate-x-1/2 z-[100]"
    style="position: absolute"
  >
    <app-button
      [type]="'primary'"
      [text]="'Vedi ' + propertiesCount + ' annunci nell\'area selezionata'"
      [size]="'md'"
      (buttonClick)="viewPropertiesInArea()"
    >
    </app-button>
  </div>

  <div
    *ngIf="!showPropertyCountButton"
    class="fixed bottom-8 left-1/2 transform -translate-x-1/2 z-[100]"
    style="position: absolute"
  >
    <div class="bg-white rounded-sm text-md py-3 px-4 border border-gray-300">
      <h2 class="font-bold inline-flex items-center gap-x-2 text-black">
        Clicca su
        <svg
          fill="#3C3D3E"
          height="15px"
          width="15px"
          version="1.1"
          id="Layer_1"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          viewBox="0 0 512.01 512.01"
          xml:space="preserve"
        >
          <g>
            <g>
              <path
                d="M507.804,200.28L262.471,12.866c-3.84-2.923-9.131-2.923-12.949,0L4.188,200.28c-3.605,2.773-5.077,7.531-3.648,11.84
           l93.717,281.92c1.451,4.373,5.525,7.296,10.133,7.296h303.253c4.587,0,8.683-2.944,10.133-7.296l93.717-281.92
           C512.882,207.789,511.41,203.053,507.804,200.28z"
              />
            </g>
          </g>
        </svg>
        per disegnare i punti
      </h2>
    </div>
  </div>

  <!-- The drawing map component with event handler for drawing complete -->
  <app-leaflet-map-draw
    class="relative z-50"
    (drawingComplete)="onDrawingComplete($event)"
  >
  </app-leaflet-map-draw>
</div>
