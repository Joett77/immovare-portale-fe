<div class="container mx-auto p-6">
  <div class="flex flex-col md:flex-row">
    <div class="w-full md:mb-6 md:w-2/3 md:p-6">
      <h2 class="text-2xl font-bold text-primary-dark mb-4 font-montserrat">{{ title() }}</h2>
      <div class="w-full mb-6">
        <h3 class="text-xl text-primary-dark mb-6 font-montserrat">{{ description() }}</h3>

        <!-- Loading state -->
        @if (isLoading()) {
          <div class="flex justify-center items-center py-8">
            <div
              class="spinner-border text-primary"
              role="status"
            >
              <span class="sr-only">Loading...</span>
            </div>
            <p class="ml-3">Caricamento in corso...</p>
          </div>
        }

        <!-- Error message -->
        @if (errorMessage()) {
          <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
            <span class="block sm:inline">{{ errorMessage() }}</span>
            <button
              class="absolute top-0 bottom-0 right-0 px-4 py-3"
              (click)="errorMessage.set(null)"
            >
              <span class="sr-only">Chiudi</span>
            </button>
          </div>
        }

        <!-- File uploader -->
        <app-file-uploader
          [type]="type()"
          [description]="description()"
          [propertyId]="effectivePropertyId()"
          [initialFiles]="uploadedFiles"
          (filesUploaded)="handleFilesUploaded($event)"
          (uploadError)="handleUploadError($event)"
        ></app-file-uploader>
      </div>
    </div>

    <!-- Photo shoot card (only displayed for photos upload) -->
    @if (type() === 'file') {
      <div class="w-full mb-6 md:px-6 md:pt-6 md:mt-[70px] md:w-1/3">
        <app-photo-shoot-card
          [propertyId]="effectivePropertyId() ?? undefined"
        ></app-photo-shoot-card>
      </div>
    }
  </div>
</div>
